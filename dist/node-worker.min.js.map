{
  "version": 3,
  "sources": ["../src/node-worker.ts"],
  "sourcesContent": ["// Mediocre shim\nlet Worker: typeof import('worker_threads').Worker;\nconst workerAdd = \";var __w=require('worker_threads');__w.parentPort.on('message',function(m){onmessage({data:m})}),postMessage=function(m,t){__w.parentPort.postMessage(m,t)},close=process.exit;self=global\";\n\ntry {\n  Worker = require('worker_threads').Worker;\n} catch(e) {\n}\nexport default Worker ? <T>(c: string, _: number, msg: unknown, transfer: ArrayBuffer[], cb: (err: Error, msg: T) => void) => {\n  let done = false;\n  const w = new Worker(c + workerAdd, { eval: true })\n    .on('error', e => cb(e, null))\n    .on('message', m => cb(null, m))\n    .on('exit', c => {\n      if (c && !done) cb(new Error('exited with code ' + c), null);\n    });\n  w.postMessage(msg, transfer);\n  w.terminate = () => {\n    done = true;\n    return Worker.prototype.terminate.call(w);\n  }\n  return w;\n} : (_: string, __: number, ___: unknown, ____: ArrayBuffer[], cb: (err: Error, msg: null) => void) => {\n  setImmediate(() => cb(new Error('async operations unsupported - update to Node 12+ (or Node 10-11 with the --experimental-worker CLI flag)'), null));\n  const NOP = () => {};\n  return {\n    terminate: NOP,\n    postMessage: NOP\n  } as unknown as import('worker_threads').Worker;\n}"],
  "mappings": "oUACA,IAAIA,EACEC,EAAY,6LAElB,GAAI,CACFD,EAAS,EAAQ,gBAAgB,EAAE,MACrC,MAAW,CACX,CACA,IAAOE,EAAQF,EAAS,CAAIG,EAAWC,EAAWC,EAAcC,EAAyBC,IAAqC,CAC5H,IAAIC,EAAO,GACLC,EAAI,IAAIT,EAAOG,EAAIF,EAAW,CAAE,KAAM,EAAK,CAAC,EAC/C,GAAG,QAASS,GAAKH,EAAGG,EAAG,IAAI,CAAC,EAC5B,GAAG,UAAWC,GAAKJ,EAAG,KAAMI,CAAC,CAAC,EAC9B,GAAG,OAAQR,GAAK,CACXA,GAAK,CAACK,GAAMD,EAAG,IAAI,MAAM,oBAAsBJ,CAAC,EAAG,IAAI,CAC7D,CAAC,EACH,OAAAM,EAAE,YAAYJ,EAAKC,CAAQ,EAC3BG,EAAE,UAAY,KACZD,EAAO,GACAR,EAAO,UAAU,UAAU,KAAKS,CAAC,GAEnCA,CACT,EAAI,CAACL,EAAWQ,EAAYC,EAAcC,EAAqBP,IAAwC,CACrG,aAAa,IAAMA,EAAG,IAAI,MAAM,2GAA2G,EAAG,IAAI,CAAC,EACnJ,IAAMQ,EAAMC,EAAA,IAAM,CAAC,EAAP,OACZ,MAAO,CACL,UAAWD,EACX,YAAaA,CACf,CACF",
  "names": ["Worker", "workerAdd", "node_worker_default", "c", "_", "msg", "transfer", "cb", "done", "w", "e", "m", "__", "___", "____", "NOP", "__name"]
}
